{"ast":null,"code":"import _slicedToArray from\"/Users/btang/Documents/\\u7A0B\\u5F0F\\u8A2D\\u8A08/Coding Practice/ip_locator/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/btang/Documents/\\u7A0B\\u5F0F\\u8A2D\\u8A08/Coding Practice/ip_locator/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/btang/Documents/\\u7A0B\\u5F0F\\u8A2D\\u8A08/Coding Practice/ip_locator/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Address4=require('ip-address').Address4;var appURL=window.location.protocol+\"//\"+window.location.host;var callAPI=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(hexAddress,setLatitude,setLongitude){var res,data,lat,long;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(appURL,\"/api/ip/\").concat(hexAddress));case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;lat=data[0]['latitude'];long=data[0]['longitude'];setLatitude(lat);setLongitude(long);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function callAPI(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var App=function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),latitude=_useState4[0],setLatitude=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),longitude=_useState6[0],setLongitude=_useState6[1];var handleChange=function handleChange(val){// console.log(val);\nsetInput(val);};var handleClick=function handleClick(e){e.preventDefault();// console.log(input);\nsetLatitude(\"0\");setLongitude(\"0\");var address=new Address4(input);var hexAddress='0x'+address.toHex().split(':').join('');console.log(hexAddress);callAPI(hexAddress,setLatitude,setLongitude);setInput(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"IP Locator\"})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ip\",children:\"Enter an IP Address:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"ip\",name:\"ip\",placeholder:\"0.0.0.0\",value:input,onChange:function onChange(e){return handleChange(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\",onClick:function onClick(e){return handleClick(e);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Latitude: \",latitude]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Longitude: \",longitude]})]})]})]});};export default App;","map":{"version":3,"sources":["/Users/btang/Documents/程式設計/Coding Practice/ip_locator/client/src/App.js"],"names":["React","useState","useEffect","Address4","require","appURL","window","location","protocol","host","callAPI","hexAddress","setLatitude","setLongitude","fetch","res","json","data","lat","long","console","log","App","input","setInput","latitude","longitude","handleChange","val","handleClick","e","preventDefault","address","toHex","split","join","target","value"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,WAAP,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAGC,OAAO,CAAC,YAAD,CAAP,CAAsBD,QAAvC,CAEA,GAAME,CAAAA,MAAM,CAAGC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAA2B,IAA3B,CAAkCF,MAAM,CAACC,QAAP,CAAgBE,IAAjE,CAEA,GAAMC,CAAAA,OAAO,0FAAG,iBAAOC,UAAP,CAAmBC,WAAnB,CAAgCC,YAAhC,8KAEMC,CAAAA,KAAK,WAAIT,MAAJ,oBAAqBM,UAArB,EAFX,QAENI,GAFM,qCAGOA,CAAAA,GAAG,CAACC,IAAJ,EAHP,QAGNC,IAHM,eAINC,GAJM,CAIAD,IAAI,CAAC,CAAD,CAAJ,CAAQ,UAAR,CAJA,CAKNE,IALM,CAKCF,IAAI,CAAC,CAAD,CAAJ,CAAQ,WAAR,CALD,CAMZL,WAAW,CAACM,GAAD,CAAX,CACAL,YAAY,CAACM,IAAD,CAAZ,CAPY,iFASZC,OAAO,CAACC,GAAR,cATY,qEAAH,kBAAPX,CAAAA,OAAO,oDAAb,CAaA,GAAMY,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,cAA0BrB,QAAQ,CAAC,EAAD,CAAlC,wCAAOsB,KAAP,eAAcC,QAAd,eACA,eAAgCvB,QAAQ,CAAC,EAAD,CAAxC,yCAAOwB,QAAP,eAAiBb,WAAjB,eACA,eAAkCX,QAAQ,CAAC,EAAD,CAA1C,yCAAOyB,SAAP,eAAkBb,YAAlB,eAEA,GAAMc,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,GAAD,CAAS,CAC5B;AACAJ,QAAQ,CAACI,GAAD,CAAR,CACD,CAHD,CAKA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GACA;AACAnB,WAAW,CAAC,GAAD,CAAX,CACAC,YAAY,CAAC,GAAD,CAAZ,CACA,GAAMmB,CAAAA,OAAO,CAAG,GAAI7B,CAAAA,QAAJ,CAAaoB,KAAb,CAAhB,CACA,GAAMZ,CAAAA,UAAU,CAAG,KAAOqB,OAAO,CAACC,KAAR,GAAgBC,KAAhB,CAAsB,GAAtB,EAA2BC,IAA3B,CAAgC,EAAhC,CAA1B,CACAf,OAAO,CAACC,GAAR,CAAYV,UAAZ,EACAD,OAAO,CAACC,UAAD,CAAaC,WAAb,CAA0BC,YAA1B,CAAP,CACAW,QAAQ,CAAC,EAAD,CAAR,CACD,CAVD,CAYA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,eAAQ,SAAS,CAAC,YAAlB,uBACE,kCADF,EADF,cAIE,qCACE,qCACE,cAAO,OAAO,CAAC,IAAf,kCADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,IAAtB,CAA2B,IAAI,CAAC,IAAhC,CAAqC,WAAW,CAAC,SAAjD,CAA2D,KAAK,CAAED,KAAlE,CAAyE,QAAQ,CAAE,kBAAAO,CAAC,QAAIH,CAAAA,YAAY,CAACG,CAAC,CAACM,MAAF,CAASC,KAAV,CAAhB,EAApF,EAFF,cAGE,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,CAAoC,OAAO,CAAE,iBAAAP,CAAC,QAAID,CAAAA,WAAW,CAACC,CAAD,CAAf,EAA9C,EAHF,GADF,cAME,oCACE,kCAAcL,QAAd,GADF,cAEE,mCAAeC,SAAf,GAFF,GANF,GAJF,GADF,CAkBD,CAxCD,CA0CA,cAAeJ,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\nconst Address4 = require('ip-address').Address4;\n\nconst appURL = window.location.protocol + \"//\" + window.location.host;\n\nconst callAPI = async (hexAddress, setLatitude, setLongitude) => {\n  try {\n    const res = await fetch(`${appURL}/api/ip/${hexAddress}`);\n    const data = await res.json();\n    const lat = data[0]['latitude'];\n    const long = data[0]['longitude'];\n    setLatitude(lat);\n    setLongitude(long);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nconst App = () => {\n  const [input, setInput] = useState(\"\");\n  const [latitude, setLatitude] = useState(\"\");\n  const [longitude, setLongitude] = useState(\"\");\n\n  const handleChange = (val) => {\n    // console.log(val);\n    setInput(val);\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    // console.log(input);\n    setLatitude(\"0\");\n    setLongitude(\"0\");\n    const address = new Address4(input);\n    const hexAddress = '0x' + address.toHex().split(':').join('');\n    console.log(hexAddress);\n    callAPI(hexAddress, setLatitude, setLongitude);\n    setInput(\"\");\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>IP Locator</h1>\n      </header>\n      <main>\n        <form>\n          <label htmlFor=\"ip\">Enter an IP Address:</label>\n          <input type=\"text\" id=\"ip\" name=\"ip\" placeholder=\"0.0.0.0\" value={input} onChange={e => handleChange(e.target.value)} />\n          <input type=\"submit\" value=\"Submit\" onClick={e => handleClick(e)} />\n        </form>\n        <div>\n          <p>Latitude: {latitude}</p>\n          <p>Longitude: {longitude}</p>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}